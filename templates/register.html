{% extends "base.html" %}
{% block body %}
<link rel="stylesheet" href="/static/style.css" />

<div class="container">
    <div class="login-card">
        <div class="logo">
            <h2>Pet Adoption</h2>
        </div>
        <h1>WELCOME New User!</h1>

        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="alert {{ category }}">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form id="auth-form" method="POST">
            <label>Email</label>
            <input type="email" name="username" placeholder="Enter Username" class="input-field" required />
            
            <label>Password</label>
            <input type="password" name="password" placeholder="Enter Password" class="input-field" required />

            <input type="submit" value="Login" class="input-field" onclick="setActionForm('login')" />
            <input type="button" value="Register" class="input-field" onclick="setActionForm('register')" />   
        </form>
    </div>
</div>

<script>
    function setActionForm(action) {
        let form = document.getElementById('auth-form');
        if (action === 'login') {
            form.action = "{{ url_for('login') }}";
            form.method = 'post';
            form.submit();
        } else if (action === 'register') {
            form.action = "{{ url_for('register') }}";
            form.method = 'post';
            form.submit();
        }
    }
</script>

<style>
    .alert {
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
        text-align: center;
    }

    .alert.error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }

    .alert.success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }
</style>
{% endblock %}
